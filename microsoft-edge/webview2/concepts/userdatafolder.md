---
description: Más información sobre cómo administrar carpetas de datos de usuario en aplicaciones de WebView2
title: Administrar la carpeta de datos de usuario en aplicaciones de WebView2.
author: MSEdgeTeam
ms.author: msedgedevrel
ms.date: 07/14/2020
ms.topic: conceptual
ms.prod: microsoft-edge
ms.technology: webview
keywords: IWebView2, IWebView2WebView, webview2, WebView, aplicaciones Win32, Win32, Edge, ICoreWebView2, ICoreWebView2Host, control browser, HTML Edge, carpeta de datos de usuario
ms.openlocfilehash: 870361e5f3edaea776538216c05e4114dc614342
ms.sourcegitcommit: f6764f57aed9ab7229e4eb6cc8851d0cea667403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/15/2020
ms.locfileid: "10879159"
---
# <span data-ttu-id="59bad-104">Administrar la carpeta de datos de usuario</span><span class="sxs-lookup"><span data-stu-id="59bad-104">Managing the User Data Folder</span></span>

<span data-ttu-id="59bad-105">Las aplicaciones de WebView2 interactúan con las carpetas de datos de usuario para almacenar los datos del explorador, como cookies, permisos y recursos almacenados en la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="59bad-105">WebView2 applications interact with user data folders to store browser data, such as cookies, permissions, and cached resources.</span></span> <span data-ttu-id="59bad-106">Cada instancia de un control WebView2 está asociada a una carpeta de datos de usuario.</span><span class="sxs-lookup"><span data-stu-id="59bad-106">Each instance of a WebView2 control is associated with a user data folder.</span></span> <span data-ttu-id="59bad-107">Cada carpeta de datos de usuario es única para un usuario.</span><span class="sxs-lookup"><span data-stu-id="59bad-107">Each user data folder is unique to a user.</span></span>

## <span data-ttu-id="59bad-108">Procedimientos recomendados</span><span class="sxs-lookup"><span data-stu-id="59bad-108">Best Practices</span></span>

<span data-ttu-id="59bad-109">Las carpetas de datos de usuario se crean automáticamente mediante WebView2.</span><span class="sxs-lookup"><span data-stu-id="59bad-109">User data folders are created automatically by WebView2.</span></span> <span data-ttu-id="59bad-110">Los programadores de WebView2 controlan la duración de la carpeta de datos de usuario.</span><span class="sxs-lookup"><span data-stu-id="59bad-110">WebView2 developers control the lifetime of the user data folder.</span></span> <span data-ttu-id="59bad-111">Si su aplicación vuelve a usar los datos de usuario de las sesiones de la aplicación, considere la posibilidad de guardar las carpetas de datos de usuario; de lo contrario, puede eliminarlas.</span><span class="sxs-lookup"><span data-stu-id="59bad-111">If your application re-uses user data from application sessions, consider saving the user data folders, otherwise you may delete them.</span></span> <span data-ttu-id="59bad-112">Considere los escenarios siguientes al decidir cómo administrar las carpetas de datos de usuario:</span><span class="sxs-lookup"><span data-stu-id="59bad-112">Consider the following scenarios when deciding how to manage your user data folders:</span></span>

*   <span data-ttu-id="59bad-113">Si el mismo usuario usa la aplicación varias veces y el contenido Web de la aplicación depende de los datos del usuario, guarde la carpeta de datos de usuario.</span><span class="sxs-lookup"><span data-stu-id="59bad-113">If the same user uses your application repeatedly, and the web content of the application relies on the user’s data, save the user data folder.</span></span> <span data-ttu-id="59bad-114">Si varios usuarios usan la aplicación varias veces, cree una nueva carpeta de datos de usuario para cada nuevo usuario y guarde la carpeta de datos de usuario de cada usuario.</span><span class="sxs-lookup"><span data-stu-id="59bad-114">If multiple users use your application repeatedly, create a new user data folder for each new user, and save the user data folder of each user.</span></span>
*   <span data-ttu-id="59bad-115">Si su aplicación no tiene usuarios repetidos, cree una nueva carpeta de datos de usuario para cada usuario y elimine la carpeta datos de usuario anterior.</span><span class="sxs-lookup"><span data-stu-id="59bad-115">If your application does not have repeat users, create a new user data folder for each user, and delete the previous user data folder.</span></span>

## <span data-ttu-id="59bad-116">Crear carpetas de datos de usuario</span><span class="sxs-lookup"><span data-stu-id="59bad-116">Create user data folders</span></span>

<span data-ttu-id="59bad-117">Para especificar la ubicación de la carpeta de datos de usuario, incluya el `userDataFolder` parámetro al llamar a [ICoreWebView2Environment](../reference/win32/0-9-538/icorewebview2environment.md) (Win32) o [CoreWebView2Environment](../reference/dotnet/0-9-538/microsoft-web-webview2-core-corewebview2environment.md) (.net).</span><span class="sxs-lookup"><span data-stu-id="59bad-117">To specify the location of the user data folder, include the `userDataFolder` parameter when calling [ICoreWebView2Environment](../reference/win32/0-9-538/icorewebview2environment.md) (Win32) or [CoreWebView2Environment](../reference/dotnet/0-9-538/microsoft-web-webview2-core-corewebview2environment.md) (.NET).</span></span> <span data-ttu-id="59bad-118">Después de la creación, los datos del explorador del control WebView2 se almacenan en una subcarpeta de `userDataFolder` .</span><span class="sxs-lookup"><span data-stu-id="59bad-118">After creation, browser data from your WebView2 control is stored in a subfolder of `userDataFolder`.</span></span> <span data-ttu-id="59bad-119">Cuando `userDataFolder` no se especifica, WebView2 crea carpetas de datos de usuario en ubicaciones predeterminadas de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="59bad-119">When `userDataFolder` is not specified, WebView2 creates user data folders at default locations as follows:</span></span>

* <span data-ttu-id="59bad-120">Para las aplicaciones empaquetadas de la tienda Windows, la carpeta de usuario predeterminada es la subcarpeta `ApplicationData\LocalFolder` de la carpeta del paquete.</span><span class="sxs-lookup"><span data-stu-id="59bad-120">For packaged Windows Store apps, the default user folder is the `ApplicationData\LocalFolder` subfolder in the package’s  folder.</span></span>
* <span data-ttu-id="59bad-121">Para las aplicaciones de escritorio existentes, la carpeta datos de usuario predeterminada es la ruta de acceso de archivo exe de la aplicación + `.WebView2` .</span><span class="sxs-lookup"><span data-stu-id="59bad-121">For existing desktop apps, the default user data folder is the exe path of your application + `.WebView2`.</span></span> <span data-ttu-id="59bad-122">En lugar de usar el valor predeterminado, le recomendamos que especifique una carpeta de datos de usuario y que la cree en la misma carpeta en la que se almacenan todos los demás datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="59bad-122">Instead of using the default, we recommend that you specify a user data folder, and that you create it in the same folder where all other app data is stored.</span></span>

## <span data-ttu-id="59bad-123">Eliminar carpetas de datos de usuario</span><span class="sxs-lookup"><span data-stu-id="59bad-123">Delete user data folders</span></span>

<span data-ttu-id="59bad-124">Es posible que su aplicación tenga que eliminar las carpetas de datos de usuario:</span><span class="sxs-lookup"><span data-stu-id="59bad-124">Your application may need to delete user data folders:</span></span>

* <span data-ttu-id="59bad-125">Al desinstalar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="59bad-125">When uninstalling your app.</span></span> <span data-ttu-id="59bad-126">Si está desinstalando aplicaciones de la tienda Windows empaquetadas, Windows elimina automáticamente las carpetas de datos de usuario.</span><span class="sxs-lookup"><span data-stu-id="59bad-126">If you are uninstalling packaged Windows Store apps, Windows deletes user data folders automatically.</span></span> 
* <span data-ttu-id="59bad-127">Para limpiar todo el historial de datos de exploración.</span><span class="sxs-lookup"><span data-stu-id="59bad-127">To clean up all browsing data history.</span></span>
* <span data-ttu-id="59bad-128">Para recuperar datos dañados.</span><span class="sxs-lookup"><span data-stu-id="59bad-128">To recover from data corruption.</span></span>
* <span data-ttu-id="59bad-129">Para quitar los datos de sesión anteriores.</span><span class="sxs-lookup"><span data-stu-id="59bad-129">To remove previous session data.</span></span> 


> [!NOTE]
> <span data-ttu-id="59bad-130">Es posible que los archivos de carpetas de datos de usuario aún estén en uso después de cerrar la aplicación WebView2.</span><span class="sxs-lookup"><span data-stu-id="59bad-130">Files in user data folders may still be in use after the WebView2 application is closed.</span></span> <span data-ttu-id="59bad-131">En esta situación, espere a que el proceso del explorador y todos los procesos secundarios se cierren antes de eliminar la carpeta.</span><span class="sxs-lookup"><span data-stu-id="59bad-131">In this situation, wait for the browser process and all child processes to exit before deleting the folder.</span></span> <span data-ttu-id="59bad-132">Puede recuperar el identificador de proceso del proceso del explorador mediante la `BrowserProcessId` propiedad de la WebView2.</span><span class="sxs-lookup"><span data-stu-id="59bad-132">You may retrieve the process id of the browser process using the `BrowserProcessId` property of the WebView2.</span></span>

## <span data-ttu-id="59bad-133">Compartir carpetas de datos de usuario</span><span class="sxs-lookup"><span data-stu-id="59bad-133">Share user data folders</span></span>

<span data-ttu-id="59bad-134">Es posible que los controles WebView2 compartan las mismas carpetas de datos de usuario en:</span><span class="sxs-lookup"><span data-stu-id="59bad-134">WebView2 controls may share the same user data folders to:</span></span>

* <span data-ttu-id="59bad-135">[Optimizar los recursos del sistema](../reference/win32/0-9-538/icorewebview2.md#process-model) al ejecutarse en un solo proceso del explorador.</span><span class="sxs-lookup"><span data-stu-id="59bad-135">[Optimize system resources](../reference/win32/0-9-538/icorewebview2.md#process-model) by running in one browser process.</span></span>
* <span data-ttu-id="59bad-136">Compartir el historial del explorador y los recursos almacenados en caché.</span><span class="sxs-lookup"><span data-stu-id="59bad-136">Share browser history and cached resources.</span></span> 

<span data-ttu-id="59bad-137">Tenga en cuenta lo siguiente al compartir carpetas de datos de usuario:</span><span class="sxs-lookup"><span data-stu-id="59bad-137">Consider the following when sharing user data folders:</span></span> 

1. <span data-ttu-id="59bad-138">Al volver a crear los controles de WebView2 para actualizar las versiones del explorador con eventos de [add_NewBrowserVersionAvailable](../reference/win32/0-9-538/icorewebview2environment.md#add_newbrowserversionavailable) (Win32) o [NewBrowserVersionAvailable](../reference/dotnet/0-9-538/microsoft-web-webview2-core-corewebview2environment.md#newbrowserversionavailable) (.net), asegúrese de que los procesos del explorador salen y cierran los controles de WebView2 que comparten la misma carpeta de datos de usuario.</span><span class="sxs-lookup"><span data-stu-id="59bad-138">When re-creating WebView2 controls to update browser versions using [add_NewBrowserVersionAvailable](../reference/win32/0-9-538/icorewebview2environment.md#add_newbrowserversionavailable) (Win32) or [NewBrowserVersionAvailable](../reference/dotnet/0-9-538/microsoft-web-webview2-core-corewebview2environment.md#newbrowserversionavailable) (.NET) events, ensure browser processes exit and close WebView2 controls that share the same user data folder.</span></span> <span data-ttu-id="59bad-139">Para recuperar el identificador de proceso del proceso del explorador, use la `BrowserProcessId` propiedad del control WebView2.</span><span class="sxs-lookup"><span data-stu-id="59bad-139">To retrieve the process id of the browser process, use the `BrowserProcessId` property of the WebView2 control.</span></span>

2. <span data-ttu-id="59bad-140">Los controles de WebView2 que comparten la misma carpeta de datos de usuario deben usar las mismas opciones para [ICoreWebView2Environment](../reference/win32/0-9-538/icorewebview2environment.md) (Win32) o [CoreWebView2Environment](../reference/dotnet/0-9-538/microsoft-web-webview2-core-corewebview2environment.md) (.net).</span><span class="sxs-lookup"><span data-stu-id="59bad-140">WebView2 controls that share the same user data folder must use the same options for [ICoreWebView2Environment](../reference/win32/0-9-538/icorewebview2environment.md) (Win32) or [CoreWebView2Environment](../reference/dotnet/0-9-538/microsoft-web-webview2-core-corewebview2environment.md) (.NET).</span></span> <span data-ttu-id="59bad-141">De lo contrario, se producirá un error en la creación de WebView2 `HRESULT_FROM_WIN32(ERROR_INVALID_STATE)` .</span><span class="sxs-lookup"><span data-stu-id="59bad-141">If not, the WebView2 creation will fail with `HRESULT_FROM_WIN32(ERROR_INVALID_STATE)`.</span></span> 

<span data-ttu-id="59bad-142">Para aislar las distintas partes de la aplicación o cuando no es necesario compartir datos entre controles WebView2, puede optar por usar carpetas de datos de usuario diferentes.</span><span class="sxs-lookup"><span data-stu-id="59bad-142">To isolate different parts of your application or when sharing data between WebView2 controls is not needed, you may choose to use different user data folders.</span></span> <span data-ttu-id="59bad-143">Por ejemplo, una aplicación puede constar de dos controles WebView2, uno para mostrar un anuncio y el otro para mostrar el contenido de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="59bad-143">For example, an application may consist of two WebView2 controls, one for displaying an advertisement and the other for displaying application content.</span></span> <span data-ttu-id="59bad-144">En este caso, los desarrolladores pueden optar por usar distintas carpetas de datos de usuario para cada control de WebView2.</span><span class="sxs-lookup"><span data-stu-id="59bad-144">In this scenario, developers may opt to use different user data folders for each WebView2 control.</span></span> 

> [!NOTE]
> <span data-ttu-id="59bad-145">Cada proceso de explorador WebView2 consume memoria y espacio en disco adicional.</span><span class="sxs-lookup"><span data-stu-id="59bad-145">Each WebView2 browser process consumes additional memory and disk space.</span></span> <span data-ttu-id="59bad-146">Por lo tanto, le recomendamos que no ejecute WebView2s con demasiadas carpetas de datos de usuario diferentes al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="59bad-146">Therefore, we recommend not running WebView2s with too many different user data folders at the same time.</span></span> 
